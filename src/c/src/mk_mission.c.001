#include <stdio.h>
#include <unistd.h>

int mission_number = 0;

#define MAX_OBJ 256
#define MAX_TXT 256

char title[MAX_TXT];
char type[MAX_TXT];
char start[MAX_TXT];
char pickup[MAX_TXT];
char flight2[MAX_TXT];
char failed1[MAX_TXT];
char failed2[MAX_TXT];
char end[MAX_TXT];

char objects[MAX_OBJ][MAX_TXT];
char o_num[MAX_OBJ][MAX_TXT];
char o_lat[MAX_OBJ][MAX_TXT];
char o_lon[MAX_OBJ][MAX_TXT];
char o_head[MAX_OBJ][MAX_TXT];

unsigned long min_lat = 9999999999;
unsigned long min_lon = 9999999999;
unsigned long max_lat = 0;
unsigned long max_lon = 0;
unsigned long lat_center = 0;
unsigned long lon_center = 0;
unsigned int obcnt = 0;


/*-----------------------------------------------------------------*/
/*-----------------------------------------------------------------*/
/*-----------------------------------------------------------------*/
/*-----------------------------------------------------------------*/
/*-----------------------------------------------------------------*/
int print_mission(char *m)
{
    return(0);
}
/*-----------------------------------------------------------------*/
int read_objects(char *m)
{
    return(0);
}
/*-----------------------------------------------------------------*/
int print_objects(char *m)
{
    return(0);
}
/*-----------------------------------------------------------------*/

int do_mission(char *m)
{
   char mpath[MAX_TXT];
/*
   printf("doing mission %s\n",m);
*/

   sprintf(mpath,"%s/messages.txt",m);
   if( access( mpath, F_OK ) == -1 ) {
      printf("%s does not exist\n",mpath);
      return(11);
   }
   sprintf(mpath,"%s/dsf.txt",m);
   if( access( mpath, F_OK ) == -1 ) {
      printf("%s does not exist\n",mpath);
      return(12);
   }
   printf("<mission_%d>\n",mission_number);

   print_mission(m);
   read_objects(m);
   print_objects(m);

   printf("</mission_%d>\n",mission_number);
   mission_number++;
   return(0);
}

/*-----------------------------------------------------------------*/

int print_head()
{
   printf("<?xml version=\"1.0\" encoding=\"utf-8\"?> <scenery> <name>Custom</name> </scenery>\n");
   return(0);
}

/*-----------------------------------------------------------------*/

int main(int argc, char **argv) {

   if ( argc < 2 ) {
      printf("usage: %s params....\n",argv[0]);
      return(1);
   }

   print_head();

   int i=1;
   while (i<argc) {
/*
      printf("doing mission %s\n",argv[i]);
*/
      do_mission(argv[i]);
      i++;
   }

}


